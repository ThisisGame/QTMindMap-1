<html>
	<head>
	<link href="../../third-party/google-code-prettify\prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="../../third-party/google-code-prettify\prettify.js"></script>
	</head>
	<title>
		textuiview.cpp
	</title>
	<body onload="prettyPrint()">
		<pre class="prettyprint lang-cpp linenums">#include "TextUIView.h"

TextUIView::TextUIView(MindMapModel* model)  //ªì©l¤Æ
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    _model = model;</span>
<span style = "background-color:#fdd">    _pModel = new PresentationModel(_model);</span>
<span style = "background-color:#fdd">    _functionList[ROOT_MODE] = &amp;TextUIView::selectMode;</span>
    //¥\¯à¤@-·s«ØMindMap
<span style = "background-color:#fdd">    _functionList[CREATE_NEW_MINDMAP_MODE] = &amp;TextUIView::createNewMindMap;</span>
    //¥\¯à¤G-´¡¤JNode
<span style = "background-color:#fdd">    _functionList[INSERT_NEW_NODE_MODE] = &amp;TextUIView::insertNewNode;</span>
<span style = "background-color:#fdd">    _functionList[SELECT_INSERT_MODE] = &amp;TextUIView::selectInsertMode;</span>
<span style = "background-color:#fdd">    _functionList[ENTER_NODE_NAME_MODE] = &amp;TextUIView::enterNodeName;</span>
    //¥\¯à¤T-­×§ïNode
<span style = "background-color:#fdd">    _functionList[EDIT_NODE_MODE] = &amp;TextUIView::editMode;</span>
<span style = "background-color:#fdd">    _functionList[SELECT_EDIT_MODE] = &amp;TextUIView::selectEditMode;</span>
<span style = "background-color:#fdd">    _functionList[CHANGE_DESCTIPTION_MODE] = &amp;TextUIView::changeDescription;</span>
<span style = "background-color:#fdd">    _functionList[CHANGE_PARENT_MODE] = &amp;TextUIView::changeParent;</span>
    //¥\¯à¥|-Åã¥ÜMindMap
<span style = "background-color:#fdd">    _functionList[DISPLAY_MODE] = &amp;TextUIView::display;</span>
    //¥\¯à¤­-Àx¦sMindMap
<span style = "background-color:#fdd">    _functionList[SAVE_MIND_MAP_MODE] = &amp;TextUIView::saveMindMap;</span>
    //¥\¯à¤»-Åª¨úMindMap
<span style = "background-color:#fdd">    _functionList[LOAD_MIND_MAP_MODE] = &amp;TextUIView::loadMindMap;</span>
    //¥\¯à¤C-¨ú®ø´_­ì
<span style = "background-color:#fdd">    _functionList[REDO_MODE] = &amp;TextUIView::redo;</span>
    //¥\¯à¤K-´_­ì
<span style = "background-color:#fdd">    _functionList[UNDO_MODE] = &amp;TextUIView::undo;</span>
    //¥\¯à¤E-Â÷¶}
<span style = "background-color:#fdd">    _functionList[EXIT_MODE] = &amp;TextUIView::exitMode;</span>
    //¦@¥Î¥\¯à
<span style = "background-color:#fdd">    _functionList[MESSANGE_MODE] = &amp;TextUIView::messangeMode;</span>
<span style = "background-color:#fdd">}</span>

TextUIView::~TextUIView()
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::run() //TextMode
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    while (1)</span>
    {
<span style = "background-color:#fdd">        selectMode();</span>
<span style = "background-color:#fdd">    }</span>
<span style = "background-color:#fdd">}</span>

string TextUIView::inputString() //¦r¦ê¿é¤J
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    string inputString;</span>
<span style = "background-color:#fdd">    getline(cin, inputString);</span>
<span style = "background-color:#fdd">    fflush(stdin);</span>
<span style = "background-color:#fdd">    cout &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    return inputString;</span>
<span style = "background-color:#fdd">}</span>

char TextUIView::inputChar()  //¦r¤¸¿é¤J
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    return inputString()[0];</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::selectId(string outputString)
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; outputString &lt;&lt; endl &lt;&lt; PROMPT_STRING;</span>
<span style = "background-color:#fdd">    _pModel-&gt;selectComponent(inputString());</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">    (this-&gt;*(_functionList[_pModel-&gt;getMode()]))();</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::enterDescrption(string outputString, int mode)
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; outputString &lt;&lt; endl &lt;&lt; PROMPT_STRING;</span>
<span style = "background-color:#fdd">    _pModel-&gt;setDescription(inputString(), mode);</span>
<span style = "background-color:#fdd">    display();</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::selectMode() //¼Ò¦¡¿ï¾Ü
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "Please enter your choice :" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "1. Create a new mind map" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "2. Insert a new node" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "3. Edit a node" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "4. Display mind map" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "5. Save mind map" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "6. Load mind map" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "7. Redo" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "8. Undo" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "9. Exit" &lt;&lt; endl &lt;&lt; PROMPT_STRING;</span>
<span style = "background-color:#fdd">    _pModel-&gt;selectMode(inputChar());</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">    (this-&gt;*(_functionList[_pModel-&gt;getMode()]))();</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤@
void TextUIView::createNewMindMap()  //·s«Ø¤@­ÓMindMap
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    enterDescrption("Please enter the topic :", CREATE_NEW_MINDMAP_MODE);</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤G
void TextUIView::insertNewNode()  //·s¼WNode
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    display();</span>
<span style = "background-color:#fdd">    selectId("Enter the node ID:");</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::selectInsertMode()  //¿ï¾Ü´¡¤J¼Ò¦¡
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "a.Insert a parent node" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "b.Insert a child node" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "c.Insert a sibling node" &lt;&lt; endl &lt;&lt; PROMPT_STRING;</span>
<span style = "background-color:#fdd">    _pModel-&gt;insertMode(inputChar());</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">    (this-&gt;*(_functionList[_pModel-&gt;getMode()]))();</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::enterNodeName() //¿é¤JNodeName
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    enterDescrption("Enter the node name:", ENTER_NODE_NAME_MODE);</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤T
void TextUIView::editMode()  //½s¿ènode
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    display();</span>
<span style = "background-color:#fdd">    selectId("Enter the edit node ID:");</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::selectEditMode()
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "a.Edit the description of a node" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "b.Change the parent of a node" &lt;&lt; endl;</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "c.Delete a node" &lt;&lt; endl &lt;&lt; PROMPT_STRING;</span>
<span style = "background-color:#fdd">    _pModel-&gt;editMode(inputChar());</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">    (this-&gt;*(_functionList[_pModel-&gt;getMode()]))();</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::changeDescription()
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    enterDescrption("Enter the description:", CHANGE_DESCTIPTION_MODE);</span>
<span style = "background-color:#fdd">}</span>

void TextUIView::changeParent()
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    selectId("Enter the parent ID:");</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¥|
void TextUIView::display() //Åã¥Ü¤ß´¼¹Ï
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    _pModel-&gt;display();</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤­
void TextUIView::saveMindMap() //Àx¦s¤ß´¼¹Ï
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    _pModel-&gt;saveMindMap(SAVE_FILE_NAME);</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤»
void TextUIView::loadMindMap() //Åª¨ú¤ß´¼¹Ï
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "Please input a file path:";</span>
<span style = "background-color:#fdd">    _pModel-&gt;loadMindMap(inputString());</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤C
void TextUIView::redo()
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    _pModel-&gt;redo();</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤K
void TextUIView::undo()
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    _pModel-&gt;undo();</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">}</span>

//¥\¯à¤E
void TextUIView::exitMode() //µ²§ôµ{¦¡
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; "Do you want save your mindMap?(Y/N)" &lt;&lt; endl &lt;&lt; PROMPT_STRING;</span>
<span style = "background-color:#fdd">    _pModel-&gt;exitMode(inputChar(), SAVE_FILE_NAME);</span>
<span style = "background-color:#fdd">    messangeMode();</span>
<span style = "background-color:#fdd">    exit(1);</span>
<span style = "background-color:#fdd">}</span>


void TextUIView::messangeMode() //°T®§Åã¥Ü
<span style = "background-color:#fdd">{</span>
<span style = "background-color:#fdd">    cout &lt;&lt; _pModel-&gt;getMessage();</span>
<span style = "background-color:#fdd">}</span>
</pre>
	</body>
</html>